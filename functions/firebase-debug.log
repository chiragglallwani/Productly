[debug] [2023-06-08T23:43:18.389Z] ----------------------------------------------------------------------
[debug] [2023-06-08T23:43:18.390Z] Command:       /usr/local/bin/node /usr/local/bin/firebase deploy
[debug] [2023-06-08T23:43:18.390Z] CLI Version:   11.16.1
[debug] [2023-06-08T23:43:18.390Z] Platform:      darwin
[debug] [2023-06-08T23:43:18.390Z] Node Version:  v16.17.0
[debug] [2023-06-08T23:43:18.391Z] Time:          Thu Jun 08 2023 16:43:18 GMT-0700 (Pacific Daylight Time)
[debug] [2023-06-08T23:43:18.391Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-06-08T23:43:18.421Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-06-08T23:43:18.421Z] > authorizing via signed-in user (lalwanichirag3@gmail.com)
[debug] [2023-06-08T23:43:18.421Z] [iam] checking project productly-61da0 for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]
[debug] [2023-06-08T23:43:18.422Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/productly-61da0:testIamPermissions [none]
[debug] [2023-06-08T23:43:18.422Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/productly-61da0:testIamPermissions x-goog-quota-user=projects/productly-61da0
[debug] [2023-06-08T23:43:18.422Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/productly-61da0:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2023-06-08T23:43:18.543Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/productly-61da0:testIamPermissions 200
[debug] [2023-06-08T23:43:18.543Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/productly-61da0:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get","firebasehosting.sites.update"]}
[debug] [2023-06-08T23:43:18.543Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/productly-61da0/serviceAccounts/productly-61da0@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2023-06-08T23:43:18.543Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/productly-61da0/serviceAccounts/productly-61da0@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-06-08T23:43:18.711Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/productly-61da0/serviceAccounts/productly-61da0@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2023-06-08T23:43:18.711Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/productly-61da0/serviceAccounts/productly-61da0@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2023-06-08T23:43:18.713Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/productly-61da0 [none]
[debug] [2023-06-08T23:43:18.922Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/productly-61da0 200
[debug] [2023-06-08T23:43:18.922Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/productly-61da0 {"projectId":"productly-61da0","projectNumber":"275886969758","displayName":"Productly","name":"projects/productly-61da0","resources":{"hostingSite":"productly-61da0","storageBucket":"productly-61da0.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_b4dedfeb-cbf6-47a7-aded-89a349df6a95"}
[info] 
[info] === Deploying to 'productly-61da0'...
[info] 
[info] i  deploying functions, hosting 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] ✔  functions: Finished running predeploy script. 
[debug] [2023-06-08T23:43:19.233Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/productly-61da0 [none]
[debug] [2023-06-08T23:43:19.398Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/productly-61da0 200
[debug] [2023-06-08T23:43:19.398Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/productly-61da0 {"projectId":"productly-61da0","projectNumber":"275886969758","displayName":"Productly","name":"projects/productly-61da0","resources":{"hostingSite":"productly-61da0","storageBucket":"productly-61da0.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_b4dedfeb-cbf6-47a7-aded-89a349df6a95"}
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2023-06-08T23:43:19.400Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/productly-61da0/services/cloudfunctions.googleapis.com [none]
[debug] [2023-06-08T23:43:19.400Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/productly-61da0/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/productly-61da0
[debug] [2023-06-08T23:43:19.401Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/productly-61da0/services/runtimeconfig.googleapis.com [none]
[debug] [2023-06-08T23:43:19.401Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/productly-61da0/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/productly-61da0
[debug] [2023-06-08T23:43:19.402Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/productly-61da0/services/cloudbuild.googleapis.com [none]
[debug] [2023-06-08T23:43:19.402Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/productly-61da0/services/cloudbuild.googleapis.com x-goog-quota-user=projects/productly-61da0
[debug] [2023-06-08T23:43:19.403Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/productly-61da0/services/artifactregistry.googleapis.com [none]
[debug] [2023-06-08T23:43:19.403Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/productly-61da0/services/artifactregistry.googleapis.com x-goog-quota-user=projects/productly-61da0
[debug] [2023-06-08T23:43:20.017Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/productly-61da0/services/artifactregistry.googleapis.com 200
[debug] [2023-06-08T23:43:20.018Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/productly-61da0/services/artifactregistry.googleapis.com [omitted]
[info] ✔  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2023-06-08T23:43:20.019Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/productly-61da0/services/cloudbuild.googleapis.com 200
[debug] [2023-06-08T23:43:20.019Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/productly-61da0/services/cloudbuild.googleapis.com [omitted]
[info] ✔  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2023-06-08T23:43:20.020Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/productly-61da0/services/cloudfunctions.googleapis.com 200
[debug] [2023-06-08T23:43:20.020Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/productly-61da0/services/cloudfunctions.googleapis.com [omitted]
[info] ✔  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2023-06-08T23:43:20.020Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/productly-61da0/services/runtimeconfig.googleapis.com 200
[debug] [2023-06-08T23:43:20.021Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/productly-61da0/services/runtimeconfig.googleapis.com [omitted]
[debug] [2023-06-08T23:43:20.021Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/productly-61da0/adminSdkConfig [none]
[debug] [2023-06-08T23:43:20.181Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/productly-61da0/adminSdkConfig 200
[debug] [2023-06-08T23:43:20.181Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/productly-61da0/adminSdkConfig {"projectId":"productly-61da0","storageBucket":"productly-61da0.appspot.com","locationId":"us-central"}
[debug] [2023-06-08T23:43:20.182Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/productly-61da0/configs [none]
[debug] [2023-06-08T23:43:20.611Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/productly-61da0/configs 200
[debug] [2023-06-08T23:43:20.611Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/productly-61da0/configs {}
[info] i  functions: preparing codebase default for deployment 
[debug] [2023-06-08T23:43:20.614Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2023-06-08T23:43:21.221Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "12"
  },
  "main": "index.js",
  "dependencies": {
    "cors": "^2.8.5",
    "express": "^4.17.1",
    "firebase-admin": "^9.2.0",
    "firebase-functions": "^3.11.0",
    "stripe": "^8.179.0"
  },
  "devDependencies": {
    "eslint": "^7.6.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2023-06-08T23:43:21.221Z] Building nodejs source
[warn] ⚠  functions: You are using an old version of firebase-functions SDK (3.15.7). Please update firebase-functions SDK to >=3.20.0 
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged /Users/chiraglalwani/projects/Productly/functions (76.64 KB) for uploading 
[debug] [2023-06-08T23:43:21.416Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/productly-61da0/locations/-/functions [none]
[debug] [2023-06-08T23:43:21.961Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/productly-61da0/locations/-/functions 200
[debug] [2023-06-08T23:43:21.962Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/productly-61da0/locations/-/functions {"functions":[{"name":"projects/productly-61da0/locations/us-central1/functions/api","httpsTrigger":{"url":"https://us-central1-productly-61da0.cloudfunctions.net/api","securityLevel":"SECURE_ALWAYS"},"status":"ACTIVE","entryPoint":"api","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"productly-61da0@appspot.gserviceaccount.com","updateTime":"2023-02-02T20:06:08.928Z","versionId":"1","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"ba553edbf26955c8674ecbae1220e977e564f61d"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-531146760262.us-central1.cloudfunctions.appspot.com/28ef76fc-b48e-4f79-9bba-84cd4342b20f.zip","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"productly-61da0\",\"storageBucket\":\"productly-61da0.appspot.com\"}","GCLOUD_PROJECT":"productly-61da0","EVENTARC_CLOUD_EVENT_SOURCE":"projects/productly-61da0/locations/us-central1/functions/api"},"runtime":"nodejs12","ingressSettings":"ALLOW_ALL","buildId":"689f4b20-f39c-4550-9b3f-d3db7cad68ef","buildName":"projects/275886969758/locations/us-central1/builds/689f4b20-f39c-4550-9b3f-d3db7cad68ef","dockerRegistry":"ARTIFACT_REGISTRY"}]}
[debug] [2023-06-08T23:43:21.965Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/productly-61da0/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2023-06-08T23:43:22.424Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/productly-61da0/locations/-/functions 200
[debug] [2023-06-08T23:43:22.424Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/productly-61da0/locations/-/functions {}
[debug] [2023-06-08T23:43:22.433Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/productly-61da0 [none]
[debug] [2023-06-08T23:43:22.645Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/productly-61da0 200
[debug] [2023-06-08T23:43:22.645Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/productly-61da0 {"projectId":"productly-61da0","projectNumber":"275886969758","displayName":"Productly","name":"projects/productly-61da0","resources":{"hostingSite":"productly-61da0","storageBucket":"productly-61da0.appspot.com","locationId":"us-central"},"state":"ACTIVE","etag":"1_b4dedfeb-cbf6-47a7-aded-89a349df6a95"}
[debug] [2023-06-08T23:43:22.650Z] >>> [apiv2][query] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/productly-61da0/versions [none]
[debug] [2023-06-08T23:43:22.651Z] >>> [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/productly-61da0/versions {"status":"CREATED","labels":{"deployment-tool":"cli-firebase"}}
[debug] [2023-06-08T23:43:23.516Z] <<< [apiv2][status] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/productly-61da0/versions 200
[debug] [2023-06-08T23:43:23.516Z] <<< [apiv2][body] POST https://firebasehosting.googleapis.com/v1beta1/projects/-/sites/productly-61da0/versions {"name":"projects/275886969758/sites/productly-61da0/versions/1b61b19c1d9d65b6","status":"CREATED","config":{},"labels":{"deployment-tool":"cli-firebase"}}
[debug] [2023-06-08T23:43:23.519Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/productly-61da0/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2023-06-08T23:43:23.519Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/productly-61da0/locations/us-central1/functions:generateUploadUrl {}
